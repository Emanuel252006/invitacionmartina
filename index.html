<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Primera Comuni√≥n de Martina</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="invitation-container">
        <div class="invitation-card">
            <div class="header-decoration">
                <div class="decoration-circle circle-1"></div>
                <div class="decoration-circle circle-2"></div>
                <div class="decoration-circle circle-3"></div>
            </div>
            
            <div class="invitation-content">
                <h1 class="title">Primera Comuni√≥n</h1>
                
                <div class="name-section">
                    <h2 class="name">Martina</h2>
                </div>
                
                <div class="music-player-container">
                    <div class="music-player">
                        <button id="music-toggle" class="play-pause-btn" aria-label="Reproducir/Pausar m√∫sica">
                            <span id="music-icon">‚è∏</span>
                        </button>
                        <div class="music-info">
                            <div class="music-title">Mientras Me Sigas Necesitando</div>
                            <div class="music-time">
                                <span id="current-time">0:00</span> / <span id="total-time">0:00</span>
                            </div>
                        </div>
                        <div class="volume-control">
                            <span class="volume-icon">üîä</span>
                            <input type="range" id="volume-slider" min="0" max="100" value="50" class="volume-slider">
                        </div>
                    </div>
                </div>
                
                <div class="date-section">
                    <p class="date-label">8 de Diciembre</p>
                </div>
                
                <div class="details-section">
                    <div class="event-detail">
                        <div class="icon icon-church">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 3L4 8V11H6V21H10V15H14V21H18V11H20V8L12 3Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="currentColor" fill-opacity="0.1"/>
                                <path d="M12 3V11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M7 11H17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M12 11V21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <circle cx="12" cy="13" r="1.5" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="event-info">
                            <p class="event-title">Santa Misa</p>
                            <p class="event-time">10:00 AM</p>
                            <p class="event-subtitle">El que quiera acompa√±arnos</p>
                        </div>
                    </div>
                    
                    <div class="event-detail">
                        <div class="icon icon-celebration">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 20L12 18L16 20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M10 20V14L12 12L14 14V20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="currentColor" fill-opacity="0.1"/>
                                <path d="M12 12V8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M9 8H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M7 16L9 20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M17 16L15 20" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="5" cy="14" r="1" fill="currentColor"/>
                                <circle cx="19" cy="14" r="1" fill="currentColor"/>
                            </svg>
                        </div>
                        <div class="event-info">
                            <p class="event-title">Celebraci√≥n</p>
                            <p class="event-time">4:00 PM</p>
                        </div>
                    </div>
                </div>
                
                <div class="footer-message">
                    <p>¬°Te esperamos para compartir este d√≠a tan especial!</p>
                </div>
                
                <div class="button-container">
                    <a href="https://wa.me/3508254638" target="_blank" class="confirm-button">
                        Confirmar Asistencia
                    </a>
                </div>
            </div>
            
            <div class="footer-decoration">
                <div class="leaf leaf-1">‚ú®</div>
                <div class="leaf leaf-2">‚ú®</div>
                <div class="leaf leaf-3">‚ú®</div>
            </div>
        </div>
    </div>
    
    <audio id="background-music" autoplay loop preload="auto">
        <source src="musica/Mientras Me Sigas Necesitando.mp3" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>
    
    <script>
        const audio = document.getElementById('background-music');
        const musicToggle = document.getElementById('music-toggle');
        const musicIcon = document.getElementById('music-icon');
        const volumeSlider = document.getElementById('volume-slider');
        const currentTimeSpan = document.getElementById('current-time');
        const totalTimeSpan = document.getElementById('total-time');
        
        audio.volume = 0.5; // Volumen al 50%
        
        // Formatear tiempo en minutos:segundos
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return mins + ':' + (secs < 10 ? '0' : '') + secs;
        }
        
        // Actualizar tiempo total cuando se carga el audio
        audio.addEventListener('loadedmetadata', function() {
            totalTimeSpan.textContent = formatTime(audio.duration);
        });
        
        // Actualizar tiempo actual
        audio.addEventListener('timeupdate', function() {
            currentTimeSpan.textContent = formatTime(audio.currentTime);
        });
        
        // Funci√≥n para intentar reproducir autom√°ticamente
        function tryAutoPlay() {
            if (audio.paused) {
                // Intentar reproducir inmediatamente
                const playPromise = audio.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(function() {
                        // Reproducci√≥n iniciada autom√°ticamente
                        musicIcon.textContent = '‚è∏';
                    }).catch(function(error) {
                        // Si falla, mostrar bot√≥n de play
                        musicIcon.textContent = '‚ñ∂';
                    });
                } else {
                    // Si play() no retorna una promesa, intentar de nuevo
                    setTimeout(tryAutoPlay, 100);
                }
            }
        }
        
        // Intentar reproducir inmediatamente
        tryAutoPlay();
        
        // Intentar reproducir cuando el DOM est√° listo
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(tryAutoPlay, 100);
            });
        }
        
        // Intentar reproducir cuando el audio est√° listo
        audio.addEventListener('canplay', function() {
            setTimeout(tryAutoPlay, 50);
        });
        
        // Intentar reproducir cuando se carga completamente la p√°gina
        window.addEventListener('load', function() {
            setTimeout(tryAutoPlay, 200);
        });
        
        // Intentar reproducir cuando el audio tiene datos suficientes
        audio.addEventListener('canplaythrough', function() {
            setTimeout(tryAutoPlay, 50);
        });
        
        // Intentar reproducir cuando el audio est√° cargado
        audio.addEventListener('loadeddata', function() {
            setTimeout(tryAutoPlay, 50);
        });
        
        // Intentar reproducir cuando el usuario interact√∫a (como respaldo)
        let userInteracted = false;
        function handleUserInteraction() {
            if (!userInteracted && audio.paused) {
                userInteracted = true;
                tryAutoPlay();
            }
        }
        
        document.addEventListener('click', handleUserInteraction, { once: true });
        document.addEventListener('touchstart', handleUserInteraction, { once: true });
        document.addEventListener('mousemove', handleUserInteraction, { once: true });
        document.addEventListener('keydown', handleUserInteraction, { once: true });
        
        // Control del bot√≥n play/pause
        musicToggle.addEventListener('click', function() {
            if (audio.paused) {
                audio.play();
                musicIcon.textContent = '‚è∏';
            } else {
                audio.pause();
                musicIcon.textContent = '‚ñ∂';
            }
        });
        
        // Control de volumen
        volumeSlider.addEventListener('input', function() {
            audio.volume = this.value / 100;
        });
        
        // Actualizar el icono seg√∫n el estado del audio
        audio.addEventListener('play', function() {
            musicIcon.textContent = '‚è∏';
        });
        
        audio.addEventListener('pause', function() {
            musicIcon.textContent = '‚ñ∂';
        });
    </script>
</body>
</html>

